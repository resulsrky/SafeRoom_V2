<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.saferoom.securefiles.controller.SecureFilesController"
            styleClass="secure-files-root"
            stylesheets="@../styles/styles.css, @../css/secure-files.css">

    <!-- Header -->
    <top>
        <HBox styleClass="sf-hero" alignment="CENTER_LEFT" spacing="16">
            <padding>
                <Insets top="20" right="32" bottom="20" left="32"/>
            </padding>
            <StackPane styleClass="sf-icon-badge">
                <FontIcon iconLiteral="fas-shield-alt" iconSize="22"/>
            </StackPane>
            <VBox spacing="2" HBox.hgrow="ALWAYS">
                <Label text="Secure Files" styleClass="sf-title"/>
                <Label text="Encrypted vault for your files" styleClass="sf-subtitle"/>
            </VBox>
            <Label fx:id="vaultStatsLabel" text="0 files" styleClass="sf-pill"/>
            <Button fx:id="refreshButton" styleClass="sf-ghost-button" onAction="#handleRefreshVault">
                <graphic>
                    <FontIcon iconLiteral="fas-sync-alt" iconSize="14"/>
                </graphic>
            </Button>
        </HBox>
    </top>

    <!-- Content -->
    <center>
        <VBox spacing="16" styleClass="sf-body">
            <padding>
                <Insets top="20" right="32" bottom="20" left="32"/>
            </padding>

            <!-- Drop Zone -->
            <HBox alignment="CENTER">
                <VBox fx:id="dropZone" styleClass="sf-drop-zone" alignment="CENTER" spacing="16"
                      onDragOver="#handleDragOver" onDragDropped="#handleDragDropped" onDragExited="#handleDragExited"
                      HBox.hgrow="ALWAYS" maxWidth="900" prefHeight="200">
                    <HBox.margin>
                        <Insets left="60" right="60"/>
                    </HBox.margin>
                    
                    <FontIcon fx:id="dropZoneIcon" iconLiteral="fas-cloud-upload-alt" iconSize="56"/>
                    <Label fx:id="dropZoneLabel" text="Drop files here to encrypt" styleClass="sf-drop-label"/>
                    <Label text="or click Browse to select" styleClass="sf-drop-sublabel"/>
                    
                    <HBox spacing="16" alignment="CENTER">
                        <Button fx:id="browseButton" text="Browse" styleClass="sf-btn-primary" onAction="#handleBrowseFiles">
                            <graphic>
                                <FontIcon iconLiteral="fas-folder-open" iconSize="14"/>
                            </graphic>
                        </Button>
                        <CheckBox fx:id="compressCheckbox" text="Compress" styleClass="sf-checkbox"/>
                    </HBox>
                </VBox>
            </HBox>

            <!-- Vault Panel -->
            <VBox spacing="16" styleClass="sf-panel" VBox.vgrow="ALWAYS">
                <!-- Header Row -->
                <HBox alignment="CENTER_LEFT" spacing="16">
                    <Label text="Your Files" styleClass="sf-section-title"/>
                    <Pane HBox.hgrow="ALWAYS"/>
                    <TextField fx:id="searchField" promptText="Search..." prefWidth="220" styleClass="sf-search"/>
                </HBox>

                <!-- Filter Buttons -->
                <HBox fx:id="categoryFilterBar" spacing="12" alignment="CENTER" styleClass="sf-filter-bar">
                    <Button fx:id="filterAll" text="All" styleClass="sf-filter-btn"/>
                    <Button fx:id="filterImages" styleClass="sf-filter-btn">
                        <graphic>
                            <FontIcon iconLiteral="fas-image" iconSize="14"/>
                        </graphic>
                        <text>Images</text>
                    </Button>
                    <Button fx:id="filterDocuments" styleClass="sf-filter-btn">
                        <graphic>
                            <FontIcon iconLiteral="fas-file-alt" iconSize="14"/>
                        </graphic>
                        <text>Docs</text>
                    </Button>
                    <Button fx:id="filterArchives" styleClass="sf-filter-btn">
                        <graphic>
                            <FontIcon iconLiteral="fas-file-archive" iconSize="14"/>
                        </graphic>
                        <text>Archives</text>
                    </Button>
                    <Button fx:id="filterEncrypted" styleClass="sf-filter-btn">
                        <graphic>
                            <FontIcon iconLiteral="fas-lock" iconSize="14"/>
                        </graphic>
                        <text>Encrypted</text>
                    </Button>
                </HBox>

                <!-- Files Grid -->
                <StackPane VBox.vgrow="ALWAYS" styleClass="sf-vault-area">
                    <ScrollPane fx:id="vaultScrollPane" fitToWidth="true" styleClass="vault-scroll-pane">
                        <FlowPane fx:id="filesGrid" hgap="16" vgap="16" styleClass="files-grid" alignment="CENTER"/>
                    </ScrollPane>

                    <VBox fx:id="emptyState" alignment="CENTER" spacing="12" styleClass="sf-empty-state">
                        <FontIcon iconLiteral="fas-folder-open" iconSize="64"/>
                        <Label text="No files yet" styleClass="sf-empty-title"/>
                        <Label text="Drop files above or import from DM" styleClass="sf-empty-subtitle"/>
                    </VBox>
                </StackPane>
            </VBox>
        </VBox>
    </center>
</BorderPane>
